---
title: "ubuntu下构建k8s多机集群"
date: 2021-08-25T20:19:18+08:00
tags: ["实验报告","kubernetes"]
categories: ["codebase"]
summary: "博客的构建记录"
typora-root-url: ..\..\static
---



机器选择使用华为云的两台x86虚拟机，HECS相对来说便宜一点。这回不用实验室的机器了，希望华为云的机子能给点力。

## 创建用户

* `useradd wty`
* `useradd -g root wty`
* `usermod -a -G sudo wty`
* 创建`/home/wty`

## 更新软件

### 更新apt

换源，更新apt（可以省略，华为云内网速度应该更快一些）

```bash
deb http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-security main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-updates main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-proposed main restricted universe multiverse

deb http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
deb-src http://mirrors.aliyun.com/ubuntu/ bionic-backports main restricted universe multiverse
```

### 安装并配置zsh

* `sudo apt-get install zsh`安装zsh
* 执行`sh -c "$(curl -fsSL https://raw.githubusercontent.com/robbyrussell/oh-my-zsh/master/tools/install.sh)"`进行配置

### 安装并配置git

```console
git config --global user.name "wtysos11"
git config --global user.email wtysos11@163.com
ssh-keygen -t rsa -C "wtysos11@163.com"
```

## 安装docker

* https://yeasy.gitbook.io/docker_practice/install/ubuntu
* https://docs.docker.com/engine/install/ubuntu/

配置镜像加速



## 安装kubernetes

通过kubeadm进行安装

* https://kubernetes.io/zh/docs/setup/production-environment/tools/kubeadm/install-kubeadm/
* 

